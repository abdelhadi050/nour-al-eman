<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù†ÙˆØ± Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Scheherazade+New:wght@400;700&family=Tajawal:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
:root{
  --ol:#4a5e3a;--ol-l:#6b7f56;--ol-d:#2d3d22;
  --gd:#c9a84c;--gd-l:#e8cc7a;--gd-d:#a07830;
  --bg:#f5efe0;--bg-d:#e8ddc8;--cm:#fdf8f0;
  --tx:#1a1a1a;--tx-m:#4a4a4a;--tx-l:#8a8a8a;
  --sh:0 3px 16px rgba(74,94,58,.1);--r:14px;--tr:all .28s ease;
}
[data-dark]{--bg:#141a0f;--bg-d:#1a2214;--cm:#1e2618;--tx:#f0ead8;--tx-m:#c0b898;--tx-l:#6a7a5a;}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Tajawal',sans-serif;background:var(--bg);color:var(--tx);min-height:100vh;transition:background .3s,color .3s;overflow-x:hidden}
body::before{content:'';position:fixed;inset:0;z-index:0;pointer-events:none;opacity:.03;
  background-image:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' stroke='%234a5e3a' stroke-width='1'%3E%3Cpolygon points='30,4 56,17 56,43 30,56 4,43 4,17'/%3E%3Cpolygon points='30,12 48,21 48,39 30,48 12,39 12,21'/%3E%3C/g%3E%3C/svg%3E");background-size:60px}

/* AUTH */
#auth{position:fixed;inset:0;z-index:200;display:flex;align-items:center;justify-content:center;
  background:linear-gradient(135deg,var(--ol-d),var(--ol),var(--ol-l));padding:20px}
.abox{background:var(--cm);border-radius:22px;padding:38px 32px;width:100%;max-width:400px;
  box-shadow:0 20px 60px rgba(0,0,0,.3);position:relative;overflow:hidden}
.abox::before{content:'';position:absolute;top:-50px;left:-50px;width:150px;height:150px;
  background:radial-gradient(circle,rgba(201,168,76,.18),transparent 70%);border-radius:50%}
.alogo{text-align:center;margin-bottom:26px}
.alogo .moon{font-size:42px;display:block;animation:flt 3s ease-in-out infinite}
@keyframes flt{0%,100%{transform:translateY(0)}50%{transform:translateY(-7px)}}
.alogo h1{font-family:'Amiri',serif;font-size:28px;color:var(--ol-d)}
.alogo p{font-size:11px;color:var(--tx-l);letter-spacing:2px;margin-top:3px}
.atabs{display:flex;background:var(--bg-d);border-radius:10px;padding:3px;margin-bottom:20px;gap:3px}
.atab{flex:1;padding:9px;border:none;background:transparent;border-radius:8px;
  font-family:'Tajawal',sans-serif;font-size:14px;font-weight:500;color:var(--tx-l);cursor:pointer;transition:var(--tr)}
.atab.on{background:var(--ol);color:#fff;box-shadow:var(--sh)}
.fg{margin-bottom:13px}
.fg label{display:block;font-size:12px;font-weight:500;color:var(--tx-m);margin-bottom:5px}
.fg input{width:100%;padding:11px 13px;border:2px solid var(--bg-d);border-radius:9px;
  font-family:'Tajawal',sans-serif;font-size:14px;color:var(--tx);background:var(--bg);outline:none;transition:var(--tr)}
.fg input:focus{border-color:var(--ol);background:var(--cm)}
.bmain{width:100%;padding:13px;background:linear-gradient(135deg,var(--ol),var(--ol-l));
  color:#fff;border:none;border-radius:11px;font-family:'Tajawal',sans-serif;
  font-size:15px;font-weight:600;cursor:pointer;transition:var(--tr);margin-top:6px}
.bmain:hover{filter:brightness(1.08);transform:translateY(-1px)}
.fp{display:none}.fp.on{display:block;animation:upf .3s ease}
@keyframes upf{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.errt{color:#c44;font-size:12px;margin-top:5px;min-height:18px}
.anote{text-align:center;font-size:12px;color:var(--tx-l);margin-top:14px}
.anote a{color:var(--ol);text-decoration:none}

/* APP */
#app{display:none}
.nav{position:sticky;top:0;z-index:100;background:var(--cm);border-bottom:1px solid var(--bg-d);
  display:flex;align-items:center;height:56px;padding:0 16px;gap:8px;box-shadow:0 2px 10px rgba(0,0,0,.06)}
.nbrand{font-family:'Amiri',serif;font-size:19px;color:var(--ol-d);flex-shrink:0}
.nbrand em{color:var(--gd);font-style:normal}
.nscroll{display:flex;gap:2px;overflow-x:auto;scrollbar-width:none;flex:1}
.nscroll::-webkit-scrollbar{display:none}
.nb{padding:5px 11px;border:none;background:transparent;border-radius:7px;
  font-family:'Tajawal',sans-serif;font-size:12.5px;color:var(--tx-m);cursor:pointer;transition:var(--tr);white-space:nowrap}
.nb:hover{background:var(--bg);color:var(--ol)}.nb.on{background:var(--ol);color:#fff}
.nacts{display:flex;gap:5px;align-items:center;flex-shrink:0}
.ptspill{background:linear-gradient(135deg,var(--gd-d),var(--gd));color:#fff;border-radius:99px;
  padding:4px 11px;font-size:13px;font-weight:700;white-space:nowrap;transition:transform .2s}
.ptspill.pop{transform:scale(1.18)}
.ib{width:32px;height:32px;border:none;background:var(--bg);border-radius:7px;cursor:pointer;
  display:flex;align-items:center;justify-content:center;font-size:14px;transition:var(--tr);color:var(--tx-m)}
.ib:hover{background:var(--ol);color:#fff}

.wrap{max-width:1080px;margin:0 auto;padding:20px 14px}
.page{display:none}.page.on{display:block;animation:upf .35s ease}
.stitle{font-family:'Amiri',serif;font-size:18px;color:var(--ol-d);margin-bottom:14px;
  display:flex;align-items:center;gap:8px}
.stitle::after{content:'';flex:1;height:1px;background:linear-gradient(to left,transparent,var(--bg-d))}
.card{background:var(--cm);border-radius:var(--r);padding:20px;box-shadow:var(--sh);border:1px solid var(--bg-d);transition:var(--tr)}
.card:hover{border-color:rgba(201,168,76,.28)}
.g2{display:grid;grid-template-columns:repeat(auto-fill,minmax(190px,1fr));gap:12px;margin-bottom:20px}
.g3{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:12px;margin-bottom:20px}

/* DASHBOARD */
.welcome{background:linear-gradient(135deg,var(--ol-d),var(--ol) 60%,var(--ol-l));
  border-radius:var(--r);padding:26px;color:#fff;margin-bottom:18px;position:relative;overflow:hidden}
.welcome::before{content:'ï·½';position:absolute;top:-8px;left:14px;font-family:'Amiri',serif;
  font-size:64px;opacity:.07;color:var(--gd);pointer-events:none}
.welcome h2{font-size:20px;font-weight:700}.welcome p{opacity:.85;margin-top:4px;font-size:13px}
.scard{background:var(--cm);border-radius:var(--r);padding:18px;box-shadow:var(--sh);
  border:1px solid var(--bg-d);position:relative;overflow:hidden;transition:var(--tr)}
.scard:hover{transform:translateY(-2px);box-shadow:0 7px 22px rgba(74,94,58,.14)}
.scard .acc{position:absolute;top:0;right:0;width:65px;height:65px;border-radius:0 14px 0 100%;opacity:.12}
.sic{font-size:26px;margin-bottom:8px}
.slbl{font-size:10px;color:var(--tx-l);font-weight:600;text-transform:uppercase;letter-spacing:.8px}
.sval{font-size:24px;font-weight:700;color:var(--ol-d);margin-top:3px}
.ssub{font-size:11px;color:var(--tx-l);margin-top:2px}
.pb{height:7px;background:var(--bg-d);border-radius:99px;overflow:hidden;margin-top:7px}
.pbf{height:100%;border-radius:99px;background:linear-gradient(to left,var(--gd-l),var(--ol));transition:width .7s ease}
.rem{background:linear-gradient(135deg,rgba(201,168,76,.07),rgba(74,94,58,.07));
  border:1px solid rgba(201,168,76,.22);border-radius:var(--r);padding:22px;margin-bottom:18px;text-align:center}
.rem-q{font-family:'Scheherazade New',serif;font-size:21px;color:var(--ol-d);line-height:1.9;margin-bottom:7px}
.rem-r{font-size:11px;color:var(--tx-l)}
.bsm{padding:8px 16px;border:none;border-radius:9px;font-family:'Tajawal',sans-serif;
  font-size:13px;font-weight:600;cursor:pointer;transition:var(--tr)}
.bol{background:var(--ol);color:#fff}.bol:hover{background:var(--ol-d)}
.bgd{background:var(--gd);color:#fff}.bgd:hover{background:var(--gd-d)}
.gitem{background:var(--cm);border-radius:12px;padding:16px 18px;margin-bottom:10px;
  box-shadow:var(--sh);border:1px solid var(--bg-d)}
.gh{display:flex;justify-content:space-between;align-items:center;margin-bottom:7px}
.gn{font-weight:600;font-size:14px}.gp{font-size:12px;color:var(--gd-d);font-weight:700}

/* QURAN */
.qctrl{display:flex;gap:9px;flex-wrap:wrap;margin-bottom:16px;align-items:center}
.qctrl select,.qctrl input{padding:9px 12px;border:2px solid var(--bg-d);border-radius:9px;
  font-family:'Tajawal',sans-serif;font-size:13px;color:var(--tx);background:var(--bg);outline:none;transition:var(--tr)}
.qctrl select:focus,.qctrl input:focus{border-color:var(--ol)}
.shdr{text-align:center;padding:18px;background:var(--cm);border-radius:var(--r);
  box-shadow:var(--sh);margin-bottom:16px;border:1px solid var(--bg-d)}
.shdr .bism{font-family:'Scheherazade New',serif;font-size:24px;color:var(--ol-d);margin-bottom:7px}
.shdr h3{font-family:'Amiri',serif;font-size:20px;color:var(--gd-d)}
.shdr p{font-size:11px;color:var(--tx-l);margin-top:3px}
.alist{display:flex;flex-direction:column;gap:11px}
.ai{background:var(--cm);border-radius:12px;padding:18px;box-shadow:var(--sh);
  border:2px solid transparent;cursor:pointer;transition:var(--tr)}
.ai:hover{border-color:var(--gd);transform:translateX(-3px)}
.ai.bk{border-color:var(--gd);background:rgba(201,168,76,.05)}
.anum{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;
  background:var(--gd);color:#fff;border-radius:50%;font-size:11px;font-weight:700;float:left;margin-left:10px}
.atxt{font-family:'Scheherazade New',serif;font-size:20px;line-height:2;color:var(--tx)}
.atr{margin-top:9px;padding-top:9px;border-top:1px solid var(--bg-d);
  font-size:12px;color:var(--tx-l);text-align:left;direction:ltr;font-style:italic}
.khcard{background:var(--cm);border-radius:var(--r);padding:22px;box-shadow:var(--sh);
  border:1px solid var(--bg-d);margin-bottom:16px}
.khs{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin:14px 0}
.khst{text-align:center}
.khv{font-size:20px;font-weight:700;color:var(--ol-d);font-family:'Amiri',serif}
.khl{font-size:10px;color:var(--tx-l);margin-top:2px}
.loading{display:flex;align-items:center;justify-content:center;gap:9px;padding:32px;color:var(--tx-l)}
.spin{width:22px;height:22px;border:3px solid var(--bg-d);border-top-color:var(--ol);
  border-radius:50%;animation:sp .7s linear infinite}
@keyframes sp{to{transform:rotate(360deg)}}

/* PRAYER */
.prgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(110px,1fr));gap:9px;margin-bottom:16px}
.pri{background:var(--bg);border-radius:10px;padding:12px;text-align:center;border:2px solid transparent;transition:var(--tr)}
.pri.cur{border-color:var(--gd);background:linear-gradient(135deg,rgba(201,168,76,.1),rgba(74,94,58,.1))}
.prn{font-size:11px;color:var(--tx-l)}.prt{font-size:17px;font-weight:700;color:var(--ol-d);margin-top:3px;font-family:'Amiri',serif}
.cdb{background:var(--bg);border-radius:11px;padding:16px;text-align:center;margin-top:4px}

/* DHIKR */
.tasbeeh{background:linear-gradient(135deg,var(--ol-d),var(--ol));border-radius:20px;
  padding:32px;text-align:center;color:#fff;margin-bottom:18px;position:relative;overflow:hidden}
.tasbeeh::before{content:'';position:absolute;width:220px;height:220px;
  background:radial-gradient(circle,rgba(201,168,76,.2),transparent 70%);top:-70px;right:-70px;border-radius:50%}
.tblbl{font-size:16px;opacity:.9;margin-bottom:5px;position:relative;z-index:1}
.tbnum{font-size:68px;font-weight:700;font-family:'Amiri',serif;position:relative;z-index:1;
  text-shadow:0 3px 10px rgba(0,0,0,.22);transition:transform .14s}
.tbnum.pop{transform:scale(1.12)}
.tbbtns{display:flex;gap:11px;justify-content:center;position:relative;z-index:1;margin-top:18px}
.cb{width:60px;height:60px;border-radius:50%;border:3px solid rgba(255,255,255,.32);
  background:rgba(255,255,255,.1);color:#fff;font-size:22px;cursor:pointer;transition:var(--tr)}
.cb:hover{background:rgba(255,255,255,.22);transform:scale(1.05)}
.cb.big{width:86px;height:86px;font-size:34px;border-color:var(--gd);background:rgba(201,168,76,.2)}
.dkcard{background:var(--cm);border-radius:var(--r);padding:18px;box-shadow:var(--sh);
  border:1px solid var(--bg-d);transition:var(--tr)}
.dkcard:hover{border-color:var(--ol-l);transform:translateY(-2px)}
.dkar{font-family:'Scheherazade New',serif;font-size:18px;color:var(--ol-d);
  line-height:1.8;text-align:center;margin-bottom:8px}
.dkme{font-size:11px;color:var(--tx-l);text-align:center;margin-bottom:11px}
.dkrow{display:flex;align-items:center;gap:7px}
.dkbtn{background:var(--ol);color:#fff;border:none;border-radius:99px;
  padding:4px 12px;font-size:12px;font-weight:700;cursor:pointer;transition:var(--tr)}
.dkbtn:hover{background:var(--gd)}.dkbtn.done{background:var(--gd-d)}

/* REWARDS */
.rwdh{background:linear-gradient(135deg,#141428,#1a2a4a,#0d3a2a);border-radius:var(--r);
  padding:30px;color:#fff;text-align:center;margin-bottom:18px;position:relative;overflow:hidden}
.rwdh::before{content:'âœ¦  âœ¦';position:absolute;top:10px;left:50%;transform:translateX(-50%);
  font-size:20px;opacity:.18;letter-spacing:16px}
.rwdpts{font-size:50px;font-weight:700;color:var(--gd-l);font-family:'Amiri',serif;transition:all .4s}
.rwdlv{display:inline-block;background:linear-gradient(135deg,var(--gd),var(--gd-d));
  color:#fff;border-radius:99px;padding:5px 16px;font-size:12px;font-weight:700;margin-top:7px}
.earngrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px;margin-bottom:18px}
.earncard{background:var(--cm);border-radius:12px;padding:16px;text-align:center;box-shadow:var(--sh);border:1px solid var(--bg-d)}
.earncard .ei{font-size:26px;margin-bottom:6px}
.earncard .en{font-weight:700;font-size:13px;color:var(--tx);margin-bottom:3px}
.earncard .ep{font-size:13px;font-weight:700;color:var(--gd-d)}
.bgrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:10px;margin-bottom:18px}
.bit{background:var(--cm);border-radius:12px;padding:16px;text-align:center;
  box-shadow:var(--sh);border:1px solid var(--bg-d);transition:var(--tr)}
.bit:hover{border-color:var(--gd);transform:scale(1.02)}.bit.lkd{opacity:.32;filter:grayscale(.9)}
.bem{font-size:30px;margin-bottom:5px;display:block}.bnm{font-size:12px;font-weight:700;color:var(--tx)}
.bds{font-size:10px;color:var(--tx-l);margin-top:2px}
.lbrow{display:flex;align-items:center;gap:10px;padding:12px 16px;border-bottom:1px solid var(--bg-d)}
.lbrow.me{background:rgba(201,168,76,.07);font-weight:700}
.lbrow:last-child{border-bottom:none}

/* QUIZ */
.qzcard{background:var(--cm);border-radius:var(--r);padding:26px;box-shadow:var(--sh);max-width:560px;margin:0 auto}
.qzq{font-size:16px;font-weight:600;color:var(--ol-d);margin-bottom:18px;line-height:1.6}
.qzopts{display:flex;flex-direction:column;gap:9px}
.qzopt{padding:11px 16px;border:2px solid var(--bg-d);border-radius:9px;background:var(--bg);
  cursor:pointer;font-family:'Tajawal',sans-serif;font-size:14px;text-align:right;transition:var(--tr);color:var(--tx)}
.qzopt:hover{border-color:var(--ol);background:rgba(74,94,58,.06)}
.qzopt.ok{border-color:#4a9a4a;background:rgba(74,154,74,.1);color:#2d6b2d}
.qzopt.no{border-color:#c44;background:rgba(204,68,68,.1);color:#933}

/* OCCASIONS */
.occ{background:linear-gradient(135deg,rgba(74,94,58,.07),rgba(201,168,76,.07));
  border:1px solid rgba(201,168,76,.2);border-radius:var(--r);padding:22px;margin-bottom:13px}
.cdunits{display:flex;gap:10px;justify-content:center;margin:14px 0}
.cdu{text-align:center;background:var(--ol-d);color:#fff;border-radius:9px;padding:11px 14px;min-width:58px}
.cdv{font-size:24px;font-weight:700;font-family:'Amiri',serif}.cdl{font-size:10px;opacity:.7;margin-top:2px}

/* FLOAT PTS */
.ptsf{position:fixed;pointer-events:none;z-index:999;font-weight:700;color:var(--gd);
  font-size:18px;opacity:1;transition:all .75s ease;font-family:'Amiri',serif}

/* TOAST */
#toast{position:fixed;bottom:18px;left:50%;transform:translateX(-50%) translateY(80px);
  background:var(--ol-d);color:#fff;padding:9px 22px;border-radius:99px;font-size:13px;
  z-index:500;transition:transform .4s cubic-bezier(.175,.885,.32,1.275);box-shadow:0 5px 18px rgba(0,0,0,.22)}
#toast.show{transform:translateX(-50%) translateY(0)}

@media(max-width:580px){
  .nav{padding:0 10px;height:50px}.nb{padding:5px 8px;font-size:11.5px}
  .wrap{padding:14px 10px}.welcome{padding:18px}.tbnum{font-size:52px}
  .cdunits{gap:7px}.cdu{padding:8px 10px;min-width:50px}.g2{grid-template-columns:1fr 1fr}
}
[data-dark] .abox{background:#1e2618}
[data-dark] .fg input{background:#2a3520;border-color:#3a4a2a;color:#f0ead8}
[data-dark] .atabs{background:#2d3d22}
</style>
</head>
<body>

<!-- â•â•â•â• AUTH â•â•â•â• -->
<div id="auth">
  <div class="abox">
    <div class="alogo">
      <span class="moon">ğŸŒ™</span>
      <h1>Ù†ÙˆØ± Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†</h1>
      <p>NOUR AL-EMAN</p>
    </div>
    <div class="atabs">
      <button class="atab on" onclick="atab('lg')">Ø¯Ø®ÙˆÙ„</button>
      <button class="atab" onclick="atab('rg')">Ù…Ø³ØªØ®Ø¯Ù… Ø¬Ø¯ÙŠØ¯</button>
    </div>
    <div id="fp-lg" class="fp on">
      <div class="fg"><label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…</label><input id="l-n" placeholder="Ø§Ø³Ù…Ùƒ"></div>
      <div class="fg"><label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label><input id="l-p" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" dir="ltr"></div>
      <div class="errt" id="l-e"></div>
      <button class="bmain" onclick="doLogin()">Ø¯Ø®ÙˆÙ„ â†</button>
      <div class="anote"><a href="#">Ø³ÙŠØ§Ø³Ø© Ø§Ù„Ø®ØµÙˆØµÙŠØ©</a> Â· <a href="#">Ø§Ù„Ø´Ø±ÙˆØ·</a></div>
    </div>
    <div id="fp-rg" class="fp">
      <div class="fg"><label>Ø§Ù„Ø§Ø³Ù…</label><input id="r-n" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ±ÙŠÙ…"></div>
      <div class="fg"><label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (6+ Ø£Ø­Ø±Ù)</label><input id="r-p" type="password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" dir="ltr"></div>
      <div class="errt" id="r-e"></div>
      <button class="bmain" onclick="doReg()">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ â†</button>
      <div class="anote">Ø±ØµÙŠØ¯Ùƒ ÙŠØ¨Ø¯Ø£ Ù…Ù† <strong>0 Ù†Ù‚Ø·Ø©</strong> ÙˆÙŠØ²ÙŠØ¯ Ø¨ÙƒÙ„ Ø¹Ù…Ù„ ğŸŒŸ</div>
    </div>
  </div>
</div>

<!-- â•â•â•â• APP â•â•â•â• -->
<div id="app">
  <nav class="nav">
    <div class="nbrand">Ù†ÙˆØ± <em>Ø§Ù„Ø¥ÙŠÙ…Ø§Ù†</em></div>
    <div class="nscroll">
      <button class="nb on" onclick="gto('dash',this)">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</button>
      <button class="nb" onclick="gto('quran',this)">ğŸ“– Ø§Ù„Ù‚Ø±Ø¢Ù†</button>
      <button class="nb" onclick="gto('prayer',this)">ğŸ•Œ Ø§Ù„ØµÙ„Ø§Ø©</button>
      <button class="nb" onclick="gto('dhikr',this)">ğŸ“¿ Ø§Ù„Ø°ÙƒØ±</button>
      <button class="nb" onclick="gto('rwd',this)">ğŸ… Ù…ÙƒØ§ÙØ¢ØªÙŠ</button>
      <button class="nb" onclick="gto('occ',this)">ğŸŒ™ Ù…Ù†Ø§Ø³Ø¨Ø§Øª</button>
      <button class="nb" onclick="gto('quiz',this)">ğŸ§  Ø§Ø®ØªØ¨Ø§Ø±</button>
    </div>
    <div class="nacts">
      <div class="ptspill" id="nav-pts">â­ 0</div>
      <button class="ib" onclick="tglDark()">ğŸŒ™</button>
      <button class="ib" onclick="doOut()">â†©</button>
    </div>
  </nav>

  <div class="wrap">

    <!-- DASHBOARD -->
    <div id="pg-dash" class="page on">
      <div class="welcome">
        <h2>Ø£Ù‡Ù„Ø§Ù‹ØŒ <span id="u-nm">â€”</span> ğŸ‘‹</h2>
        <p id="u-st">ğŸŒ¿ ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯ØŒ ÙØ±ØµØ© Ø¬Ø¯ÙŠØ¯Ø© Ù„Ù„ØªÙ‚Ø±Ø¨ Ù…Ù† Ø§Ù„Ù„Ù‡</p>
      </div>
      <div class="g2">
        <div class="scard"><div class="acc" style="background:var(--gd)"></div>
          <div class="sic">â­</div><div class="slbl">Ù†Ù‚Ø§Ø·ÙŠ</div>
          <div class="sval" id="d-pts">0</div><div class="ssub" id="d-lv">Ø§Ù„Ù…Ø³ØªÙˆÙ‰: Ù…Ø¨ØªØ¯Ø¦</div>
        </div>
        <div class="scard"><div class="acc" style="background:var(--ol)"></div>
          <div class="sic">ğŸ“–</div><div class="slbl">Ø§Ù„Ø®ØªÙ…Ø©</div>
          <div class="sval" id="d-kh">0%</div>
          <div class="pb"><div class="pbf" id="d-kh-b" style="width:0"></div></div>
        </div>
        <div class="scard"><div class="acc" style="background:#5a8a5a"></div>
          <div class="sic">ğŸ“¿</div><div class="slbl">Ø§Ù„ØªØ³Ø¨ÙŠØ­ Ø§Ù„ÙŠÙˆÙ…</div>
          <div class="sval" id="d-tb">0</div><div class="ssub">ØªØ³Ø¨ÙŠØ­Ø©</div>
        </div>
        <div class="scard"><div class="acc" style="background:var(--gd-d)"></div>
          <div class="sic">ğŸ”¥</div><div class="slbl">Ø£ÙŠØ§Ù… Ù…ØªØªØ§Ù„ÙŠØ©</div>
          <div class="sval" id="d-str">0</div><div class="ssub">ÙŠÙˆÙ…</div>
        </div>
      </div>
      <div class="rem">
        <div class="rem-q" id="rem-q">Ø¥ÙÙ†ÙÙ‘ Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§</div>
        <div class="rem-r" id="rem-r">Ø³ÙˆØ±Ø© Ø§Ù„Ø´Ø±Ø­ Â· Ø§Ù„Ø¢ÙŠØ© 6</div>
        <button class="bsm bol" style="margin-top:13px" onclick="nxtRem()">ğŸ”„ ØªØ°ÙƒÙŠØ± Ø¢Ø®Ø± (+5 Ù†Ù‚Ø§Ø·)</button>
      </div>
      <div class="stitle">ğŸ¯ Ø£Ù‡Ø¯Ø§ÙÙŠ</div>
      <div class="gitem"><div class="gh"><span class="gn">Ø®ØªÙ…Ø© Ø§Ù„Ù‚Ø±Ø¢Ù†</span><span class="gp" id="gkp">0%</span></div><div class="pb"><div class="pbf" id="gkb" style="width:0"></div></div></div>
      <div class="gitem"><div class="gh"><span class="gn">Ø§Ù„ØªØ³Ø¨ÙŠØ­ Ø§Ù„ÙŠÙˆÙ…ÙŠ (100)</span><span class="gp" id="gtp">0%</span></div><div class="pb"><div class="pbf" id="gtb" style="width:0"></div></div></div>
      <div class="gitem"><div class="gh"><span class="gn">Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­</span><span class="gp" id="gdp">0%</span></div><div class="pb"><div class="pbf" id="gdb" style="width:0"></div></div></div>
    </div>

    <!-- QURAN -->
    <div id="pg-quran" class="page">
      <div class="khcard">
        <div class="stitle">ğŸ“Š Ø§Ù„Ø®ØªÙ…Ø© Ø§Ù„Ø°ÙƒÙŠØ©</div>
        <div class="khs">
          <div class="khst"><div class="khv">30</div><div class="khl">ÙŠÙˆÙ… Ù„Ù„Ø®ØªÙ…Ø©</div></div>
          <div class="khst"><div class="khv">20</div><div class="khl">ØµÙØ­Ø©/ÙŠÙˆÙ…</div></div>
          <div class="khst"><div class="khv" id="kh-lft">30</div><div class="khl">ÙŠÙˆÙ… Ù…ØªØ¨Ù‚ÙŠ</div></div>
        </div>
        <div class="pb" style="margin-bottom:13px"><div class="pbf" id="khbar" style="width:0"></div></div>
        <div style="display:flex;gap:9px;flex-wrap:wrap">
          <button class="bsm bol" onclick="markDay()">âœ… Ø£ÙƒÙ…Ù„Øª ÙˆØ±Ø¯ Ø§Ù„ÙŠÙˆÙ… (+50 Ù†Ù‚Ø·Ø©)</button>
          <button class="bsm bgd" onclick="bkCur()">ğŸ”– Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ¶Ø¹ (+5 Ù†Ù‚Ø§Ø·)</button>
        </div>
      </div>
      <div class="qctrl">
        <select id="ssel" onchange="ldSurah(this.value)"><option value="">â€” Ø§Ø®ØªØ± Ø³ÙˆØ±Ø© â€”</option></select>
        <input type="text" id="qsrch" placeholder="ğŸ” Ø¨Ø­Ø« ÙÙŠ Ø§Ù„Ø¢ÙŠØ§Øª" oninput="filterA(this.value)" style="flex:1;min-width:130px">
      </div>
      <div class="shdr">
        <div class="bism">Ø¨ÙØ³Ù’Ù…Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø§Ù„Ø±ÙÙ‘Ø­Ù’Ù…ÙÙ°Ù†Ù Ø§Ù„Ø±ÙÙ‘Ø­ÙÙŠÙ…Ù</div>
        <h3 id="snm">Ø§Ù„ÙØ§ØªØ­Ø©</h3><p id="sinf">Ù…ÙƒÙŠØ© Â· 7 Ø¢ÙŠØ§Øª</p>
      </div>
      <div class="alist" id="alist"><div class="loading"><div class="spin"></div> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div></div>
    </div>

    <!-- PRAYER -->
    <div id="pg-prayer" class="page">
      <div class="card" style="margin-bottom:0">
        <div class="stitle">ğŸ•Œ Ù…ÙˆØ§Ù‚ÙŠØª Ø§Ù„ØµÙ„Ø§Ø©</div>
        <p id="prloc" style="font-size:11px;color:var(--tx-l);margin-bottom:13px">ğŸ“ Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...</p>
        <div class="prgrid" id="prgrid">
          <div class="pri"><div class="prn">Ø§Ù„ÙØ¬Ø±</div><div class="prt" id="pt-fj">â€”</div></div>
          <div class="pri"><div class="prn">Ø§Ù„Ø´Ø±ÙˆÙ‚</div><div class="prt" id="pt-sr">â€”</div></div>
          <div class="pri"><div class="prn">Ø§Ù„Ø¸Ù‡Ø±</div><div class="prt" id="pt-dh">â€”</div></div>
          <div class="pri"><div class="prn">Ø§Ù„Ø¹ØµØ±</div><div class="prt" id="pt-as">â€”</div></div>
          <div class="pri"><div class="prn">Ø§Ù„Ù…ØºØ±Ø¨</div><div class="prt" id="pt-mg">â€”</div></div>
          <div class="pri"><div class="prn">Ø§Ù„Ø¹Ø´Ø§Ø¡</div><div class="prt" id="pt-is">â€”</div></div>
        </div>
        <div class="cdb">
          <div style="font-size:11px;color:var(--tx-l);margin-bottom:3px">Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©</div>
          <div style="font-size:17px;font-weight:700;color:var(--ol-d)" id="prnn">â€”</div>
          <div style="font-size:30px;font-weight:700;color:var(--gd-d);font-family:'Amiri',serif" id="prcd">--:--:--</div>
        </div>
        <div style="margin-top:13px;display:flex;gap:9px;flex-wrap:wrap">
          <button class="bsm bol" onclick="initPr()">ğŸ“ ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù…ÙˆÙ‚Ø¹</button>
          <button class="bsm bgd" onclick="prDone()">ğŸ•Œ Ø³Ø¬Ù‘Ù„ ØµÙ„Ø§ØªÙŠ (+30 Ù†Ù‚Ø·Ø©)</button>
        </div>
      </div>
    </div>

    <!-- DHIKR -->
    <div id="pg-dhikr" class="page">
      <div class="tasbeeh">
        <div class="tblbl" id="tblbl">Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡</div>
        <div class="tbnum" id="tbnum">0</div>
        <div class="tbbtns">
          <button class="cb" onclick="rstTb()" title="Ø¥Ø¹Ø§Ø¯Ø©">â†º</button>
          <button class="cb big" onclick="incTb()">+</button>
          <button class="cb" onclick="nxtTb()" title="ØªØºÙŠÙŠØ±">â†•</button>
        </div>
      </div>
      <div class="stitle">ğŸŒ… Ø£Ø°ÙƒØ§Ø± Ø§Ù„ØµØ¨Ø§Ø­ ÙˆØ§Ù„Ù…Ø³Ø§Ø¡</div>
      <div class="g3" id="dkgrid"></div>
      <div class="stitle">ğŸ¤² Ø£Ø¯Ø¹ÙŠØ©</div>
      <div class="g3" id="duagrid"></div>
    </div>

    <!-- REWARDS -->
    <div id="pg-rwd" class="page">
      <div class="rwdh">
        <div style="font-size:12px;opacity:.7;margin-bottom:3px">Ù†Ù‚Ø§Ø·ÙŠ Ø§Ù„ÙƒÙ„ÙŠØ©</div>
        <div class="rwdpts" id="rpts">0</div>
        <div class="rwdlv" id="rlv">ğŸŒ± Ù…Ø¨ØªØ¯Ø¦</div>
        <div style="margin-top:14px;font-size:12px;opacity:.7">Ø§Ù„Ù†Ù‚Ø§Ø· ØªÙÙƒØ³Ø¨ Ø¨ÙƒÙ„ Ø¹Ù…Ù„ ØµØ§Ù„Ø­ ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚</div>
      </div>
      <div class="stitle">ğŸ’¡ ÙƒÙŠÙ ØªÙƒØ³Ø¨ Ø§Ù„Ù†Ù‚Ø§Ø·ØŸ</div>
      <div class="earngrid">
        <div class="earncard"><div class="ei">ğŸ“–</div><div class="en">ÙˆØ±Ø¯ Ø§Ù„Ù‚Ø±Ø¢Ù†</div><div class="ep">+50</div></div>
        <div class="earncard"><div class="ei">ğŸ“¿</div><div class="en">Ø¥ÙƒÙ…Ø§Ù„ Ø°ÙƒØ±</div><div class="ep">+20</div></div>
        <div class="earncard"><div class="ei">ğŸ•Œ</div><div class="en">ØªØ³Ø¬ÙŠÙ„ ØµÙ„Ø§Ø©</div><div class="ep">+30</div></div>
        <div class="earncard"><div class="ei">ğŸ§ </div><div class="en">Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø©</div><div class="ep">+10</div></div>
        <div class="earncard"><div class="ei">ğŸ”–</div><div class="en">Ø­ÙØ¸ Ø¢ÙŠØ©</div><div class="ep">+5</div></div>
        <div class="earncard"><div class="ei">ğŸ”„</div><div class="en">ØªØ°ÙƒÙŠØ± Ø§Ù„ÙŠÙˆÙ…</div><div class="ep">+5</div></div>
      </div>
      <div class="stitle">ğŸ… Ø§Ù„Ø´Ø§Ø±Ø§Øª</div>
      <div class="bgrid" id="bgrid"></div>
      <div class="stitle">ğŸ† Ø§Ù„Ù…ØªØµØ¯Ø±ÙˆÙ†</div>
      <div class="card" style="padding:0;overflow:hidden" id="lb"></div>
    </div>

    <!-- OCCASIONS -->
    <div id="pg-occ" class="page">
      <div class="occ">
        <h3 style="font-family:'Amiri',serif;font-size:19px;color:var(--ol-d);margin-bottom:5px">ğŸŒ™ Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ</h3>
        <p style="font-size:12px;color:var(--tx-l);margin-bottom:4px">Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ</p>
        <div class="cdunits">
          <div class="cdu"><div class="cdv" id="ocd-d">--</div><div class="cdl">ÙŠÙˆÙ…</div></div>
          <div class="cdu"><div class="cdv" id="ocd-h">--</div><div class="cdl">Ø³Ø§Ø¹Ø©</div></div>
          <div class="cdu"><div class="cdv" id="ocd-m">--</div><div class="cdl">Ø¯Ù‚ÙŠÙ‚Ø©</div></div>
          <div class="cdu"><div class="cdv" id="ocd-s">--</div><div class="cdl">Ø«Ø§Ù†ÙŠØ©</div></div>
        </div>
      </div>
      <div class="occ">
        <h3 style="font-family:'Amiri',serif;font-size:19px;color:var(--ol-d);margin-bottom:13px">ğŸ•‹ Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø­Ø¬ ÙˆØ§Ù„Ø¹Ù…Ø±Ø©</h3>
        <div class="g3" style="margin-bottom:0">
          <div class="card"><strong style="color:var(--ol-d)">Ø§Ù„Ø¥Ø­Ø±Ø§Ù…</strong><p style="font-size:12px;color:var(--tx-l);margin-top:5px">Ø§Ù„Ù†ÙŠØ© ÙˆØ§Ù„ØªÙ„Ø¨ÙŠØ© ÙˆØ§Ø±ØªØ¯Ø§Ø¡ Ù…Ù„Ø§Ø¨Ø³ Ø§Ù„Ø¥Ø­Ø±Ø§Ù…</p></div>
          <div class="card"><strong style="color:var(--ol-d)">Ø§Ù„Ø·ÙˆØ§Ù</strong><p style="font-size:12px;color:var(--tx-l);margin-top:5px">Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø· Ø­ÙˆÙ„ Ø§Ù„ÙƒØ¹Ø¨Ø© Ø§Ù„Ù…Ø´Ø±ÙØ©</p></div>
          <div class="card"><strong style="color:var(--ol-d)">Ø§Ù„Ø³Ø¹ÙŠ</strong><p style="font-size:12px;color:var(--tx-l);margin-top:5px">Ø³Ø¨Ø¹Ø© Ø£Ø´ÙˆØ§Ø· Ø¨ÙŠÙ† Ø§Ù„ØµÙØ§ ÙˆØ§Ù„Ù…Ø±ÙˆØ©</p></div>
          <div class="card"><strong style="color:var(--ol-d)">Ø§Ù„ÙˆÙ‚ÙˆÙ Ø¨Ø¹Ø±ÙØ©</strong><p style="font-size:12px;color:var(--tx-l);margin-top:5px">Ø±ÙƒÙ† Ø§Ù„Ø­Ø¬ Ø§Ù„Ø£Ø¹Ø¸Ù… ÙŠÙˆÙ… Ø§Ù„ØªØ§Ø³Ø¹ Ù…Ù† Ø°ÙŠ Ø§Ù„Ø­Ø¬Ø©</p></div>
        </div>
      </div>
    </div>

    <!-- QUIZ -->
    <div id="pg-quiz" class="page">
      <div class="qzcard">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
          <div class="stitle" style="margin-bottom:0">ğŸ§  Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø³Ù„Ø§Ù…ÙŠ</div>
          <span style="font-size:12px;color:var(--tx-l)">Ø³Ø¤Ø§Ù„ <span id="qzn">1</span>/<span id="qzt">10</span></span>
        </div>
        <div class="pb" style="margin-bottom:18px"><div class="pbf" id="qzbar" style="width:10%"></div></div>
        <div class="qzq" id="qzq">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>
        <div class="qzopts" id="qzopts"></div>
        <div style="margin-top:14px;display:flex;justify-content:space-between;align-items:center">
          <div style="font-size:13px;color:var(--tx-l)">Ø§Ù„Ù†ØªÙŠØ¬Ø©: <strong style="color:var(--ol-d)" id="qzsc">0</strong></div>
          <button class="bsm bol" id="qznxt" onclick="qNext()" style="display:none">Ø§Ù„ØªØ§Ù„ÙŠ â†’</button>
        </div>
      </div>
    </div>

  </div>
</div>

<div id="toast"></div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// CONSTANTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const SN=['Ø§Ù„ÙØ§ØªØ­Ø©','Ø§Ù„Ø¨Ù‚Ø±Ø©','Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†','Ø§Ù„Ù†Ø³Ø§Ø¡','Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©','Ø§Ù„Ø£Ù†Ø¹Ø§Ù…','Ø§Ù„Ø£Ø¹Ø±Ø§Ù','Ø§Ù„Ø£Ù†ÙØ§Ù„','Ø§Ù„ØªÙˆØ¨Ø©','ÙŠÙˆÙ†Ø³','Ù‡ÙˆØ¯','ÙŠÙˆØ³Ù','Ø§Ù„Ø±Ø¹Ø¯','Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…','Ø§Ù„Ø­Ø¬Ø±','Ø§Ù„Ù†Ø­Ù„','Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡','Ø§Ù„ÙƒÙ‡Ù','Ù…Ø±ÙŠÙ…','Ø·Ù‡','Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡','Ø§Ù„Ø­Ø¬','Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†','Ø§Ù„Ù†ÙˆØ±','Ø§Ù„ÙØ±Ù‚Ø§Ù†','Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡','Ø§Ù„Ù†Ù…Ù„','Ø§Ù„Ù‚ØµØµ','Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª','Ø§Ù„Ø±ÙˆÙ…','Ù„Ù‚Ù…Ø§Ù†','Ø§Ù„Ø³Ø¬Ø¯Ø©','Ø§Ù„Ø£Ø­Ø²Ø§Ø¨','Ø³Ø¨Ø£','ÙØ§Ø·Ø±','ÙŠØ³','Ø§Ù„ØµØ§ÙØ§Øª','Øµ','Ø§Ù„Ø²Ù…Ø±','ØºØ§ÙØ±','ÙØµÙ„Øª','Ø§Ù„Ø´ÙˆØ±Ù‰','Ø§Ù„Ø²Ø®Ø±Ù','Ø§Ù„Ø¯Ø®Ø§Ù†','Ø§Ù„Ø¬Ø§Ø«ÙŠØ©','Ø§Ù„Ø£Ø­Ù‚Ø§Ù','Ù…Ø­Ù…Ø¯','Ø§Ù„ÙØªØ­','Ø§Ù„Ø­Ø¬Ø±Ø§Øª','Ù‚','Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª','Ø§Ù„Ø·ÙˆØ±','Ø§Ù„Ù†Ø¬Ù…','Ø§Ù„Ù‚Ù…Ø±','Ø§Ù„Ø±Ø­Ù…Ù†','Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©','Ø§Ù„Ø­Ø¯ÙŠØ¯','Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©','Ø§Ù„Ø­Ø´Ø±','Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©','Ø§Ù„ØµÙ','Ø§Ù„Ø¬Ù…Ø¹Ø©','Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†','Ø§Ù„ØªØºØ§Ø¨Ù†','Ø§Ù„Ø·Ù„Ø§Ù‚','Ø§Ù„ØªØ­Ø±ÙŠÙ…','Ø§Ù„Ù…Ù„Ùƒ','Ø§Ù„Ù‚Ù„Ù…','Ø§Ù„Ø­Ø§Ù‚Ø©','Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬','Ù†ÙˆØ­','Ø§Ù„Ø¬Ù†','Ø§Ù„Ù…Ø²Ù…Ù„','Ø§Ù„Ù…Ø¯Ø«Ø±','Ø§Ù„Ù‚ÙŠØ§Ù…Ø©','Ø§Ù„Ø¥Ù†Ø³Ø§Ù†','Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª','Ø§Ù„Ù†Ø¨Ø£','Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª','Ø¹Ø¨Ø³','Ø§Ù„ØªÙƒÙˆÙŠØ±','Ø§Ù„Ø§Ù†ÙØ·Ø§Ø±','Ø§Ù„Ù…Ø·ÙÙÙŠÙ†','Ø§Ù„Ø§Ù†Ø´Ù‚Ø§Ù‚','Ø§Ù„Ø¨Ø±ÙˆØ¬','Ø§Ù„Ø·Ø§Ø±Ù‚','Ø§Ù„Ø£Ø¹Ù„Ù‰','Ø§Ù„ØºØ§Ø´ÙŠØ©','Ø§Ù„ÙØ¬Ø±','Ø§Ù„Ø¨Ù„Ø¯','Ø§Ù„Ø´Ù…Ø³','Ø§Ù„Ù„ÙŠÙ„','Ø§Ù„Ø¶Ø­Ù‰','Ø§Ù„Ø´Ø±Ø­','Ø§Ù„ØªÙŠÙ†','Ø§Ù„Ø¹Ù„Ù‚','Ø§Ù„Ù‚Ø¯Ø±','Ø§Ù„Ø¨ÙŠÙ†Ø©','Ø§Ù„Ø²Ù„Ø²Ù„Ø©','Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª','Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©','Ø§Ù„ØªÙƒØ§Ø«Ø±','Ø§Ù„Ø¹ØµØ±','Ø§Ù„Ù‡Ù…Ø²Ø©','Ø§Ù„ÙÙŠÙ„','Ù‚Ø±ÙŠØ´','Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†','Ø§Ù„ÙƒÙˆØ«Ø±','Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†','Ø§Ù„Ù†ØµØ±','Ø§Ù„Ù…Ø³Ø¯','Ø§Ù„Ø¥Ø®Ù„Ø§Øµ','Ø§Ù„ÙÙ„Ù‚','Ø§Ù„Ù†Ø§Ø³'];
const REMS=[{t:'Ø¥ÙÙ†ÙÙ‘ Ù…ÙØ¹Ù Ø§Ù„Ù’Ø¹ÙØ³Ù’Ø±Ù ÙŠÙØ³Ù’Ø±Ù‹Ø§',r:'Ø³ÙˆØ±Ø© Ø§Ù„Ø´Ø±Ø­ Â· 6'},{t:'ÙˆÙÙ…ÙÙ† ÙŠÙØªÙÙ‘Ù‚Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù ÙŠÙØ¬Ù’Ø¹ÙÙ„ Ù„ÙÙ‘Ù‡Ù Ù…ÙØ®Ù’Ø±ÙØ¬Ù‹Ø§',r:'Ø³ÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø§Ù‚ Â· 2'},{t:'Ø¥ÙÙ†ÙÙ‘ Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù…ÙØ¹Ù Ø§Ù„ØµÙÙ‘Ø§Ø¨ÙØ±ÙÙŠÙ†Ù',r:'Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© Â· 153'},{t:'ÙÙØ§Ø°Ù’ÙƒÙØ±ÙÙˆÙ†ÙÙŠ Ø£ÙØ°Ù’ÙƒÙØ±Ù’ÙƒÙÙ…Ù’',r:'Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© Â· 152'},{t:'Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ù†ÙÙˆØ±Ù Ø§Ù„Ø³ÙÙ‘Ù…ÙØ§ÙˆÙØ§ØªÙ ÙˆÙØ§Ù„Ù’Ø£ÙØ±Ù’Ø¶Ù',r:'Ø³ÙˆØ±Ø© Ø§Ù„Ù†ÙˆØ± Â· 35'},{t:'ÙˆÙØ¨ÙØ´ÙÙ‘Ø±Ù Ø§Ù„ØµÙÙ‘Ø§Ø¨ÙØ±ÙÙŠÙ†Ù',r:'Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø© Â· 155'}];
const AK=[{ar:'Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù',me:'Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡',tg:33},{ar:'Ø§Ù„Ù’Ø­ÙÙ…Ù’Ø¯Ù Ù„ÙÙ„ÙÙ‘Ù‡Ù',me:'Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡',tg:33},{ar:'Ø§Ù„Ù„ÙÙ‘Ù‡Ù Ø£ÙÙƒÙ’Ø¨ÙØ±Ù',me:'Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±',tg:34},{ar:'Ù„ÙØ§ Ø¥ÙÙ„ÙÙ°Ù‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø§Ù„Ù„ÙÙ‘Ù‡Ù',me:'Ø§Ù„ØªÙˆØ­ÙŠØ¯',tg:10},{ar:'Ø£ÙØ³Ù’ØªÙØºÙ’ÙÙØ±Ù Ø§Ù„Ù„ÙÙ‘Ù‡Ù',me:'Ø§Ù„Ø§Ø³ØªØºÙØ§Ø±',tg:100}];
const DUS=[{ti:'Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø³ÙØ±',ar:'Ø³ÙØ¨Ù’Ø­ÙØ§Ù†Ù Ø§Ù„ÙÙ‘Ø°ÙÙŠ Ø³ÙØ®ÙÙ‘Ø±Ù Ù„ÙÙ†ÙØ§ Ù‡ÙÙ°Ø°ÙØ§',me:'Ø¹Ù†Ø¯ Ø±ÙƒÙˆØ¨ Ø§Ù„Ù…Ø±ÙƒØ¨Ø©'},{ti:'Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ø§Ø³ØªØ®Ø§Ø±Ø©',ar:'Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø¥ÙÙ†ÙÙ‘ÙŠ Ø£ÙØ³Ù’ØªÙØ®ÙÙŠØ±ÙÙƒÙ Ø¨ÙØ¹ÙÙ„Ù’Ù…ÙÙƒÙ',me:'Ø¹Ù†Ø¯ Ø§Ù„ØªØ±Ø¯Ø¯'},{ti:'Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ù†ÙˆÙ…',ar:'Ø¨ÙØ§Ø³Ù’Ù…ÙÙƒÙ Ø§Ù„Ù„ÙÙ‘Ù‡ÙÙ…ÙÙ‘ Ø£ÙÙ…ÙÙˆØªÙ ÙˆÙØ£ÙØ­Ù’ÙŠÙØ§',me:'Ø¹Ù†Ø¯ Ø§Ù„Ù†ÙˆÙ…'},{ti:'Ø¯Ø¹Ø§Ø¡ Ø§Ù„Ù‡Ù…',ar:'Ù„ÙØ§ Ø¥ÙÙ„ÙÙ°Ù‡Ù Ø¥ÙÙ„ÙÙ‘Ø§ Ø£ÙÙ†ØªÙ Ø³ÙØ¨Ù’Ø­ÙØ§Ù†ÙÙƒÙ',me:'Ø¹Ù†Ø¯ Ø§Ù„Ù‡Ù…'}];
const QQ=[{q:'ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ',o:['3','4','5','6'],c:2},{q:'Ù…Ø§ Ø£ÙˆÙ„ Ø³ÙˆØ±Ø© Ù†Ø²Ù„ØªØŸ',o:['Ø§Ù„ÙØ§ØªØ­Ø©','Ø§Ù„Ø¨Ù‚Ø±Ø©','Ø§Ù„Ø¹Ù„Ù‚','Ø§Ù„Ù…Ø¯Ø«Ø±'],c:2},{q:'ÙƒÙ… Ø¹Ø¯Ø¯ Ø³ÙˆØ± Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ',o:['100','110','114','120'],c:2},{q:'ÙƒÙ… Ø§Ù„ØµÙ„ÙˆØ§Øª Ø§Ù„Ù…ÙØ±ÙˆØ¶Ø©ØŸ',o:['3','4','5','6'],c:2},{q:'Ø§Ù„Ø±ÙƒÙ† Ø§Ù„Ø£ÙˆÙ„ Ù…Ù† Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ',o:['Ø§Ù„ØµÙ„Ø§Ø©','Ø§Ù„ØµÙŠØ§Ù…','Ø§Ù„Ø´Ù‡Ø§Ø¯ØªØ§Ù†','Ø§Ù„Ø²ÙƒØ§Ø©'],c:2},{q:'Ø£ÙŠÙ† ÙˆÙÙ„Ø¯ Ø§Ù„Ù†Ø¨ÙŠ ï·ºØŸ',o:['Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©','Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©','Ø§Ù„Ø·Ø§Ø¦Ù','Ø¬Ø¯Ø©'],c:1},{q:'ÙƒÙ… ÙŠÙˆÙ…Ø§Ù‹ ØµÙŠØ§Ù… Ø±Ù…Ø¶Ø§Ù†ØŸ',o:['20','25','Ø´Ù‡Ø± ÙƒØ§Ù…Ù„','10'],c:2},{q:'Ø§Ø³Ù… ÙˆØ§Ù„Ø¯Ø© Ø§Ù„Ù†Ø¨ÙŠ ï·ºØŸ',o:['Ø®Ø¯ÙŠØ¬Ø©','Ø¢Ù…Ù†Ø©','ÙØ§Ø·Ù…Ø©','Ø¹Ø§Ø¦Ø´Ø©'],c:1},{q:'Ù„ÙŠÙ„Ø© Ù†Ø²ÙˆÙ„ Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ',o:['Ù„ÙŠÙ„Ø© Ø§Ù„Ù†ØµÙ','Ù„ÙŠÙ„Ø© Ø§Ù„Ù‚Ø¯Ø±','Ù„ÙŠÙ„Ø© Ø§Ù„Ø¬Ù…Ø¹Ø©','Ù„ÙŠÙ„Ø© Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡'],c:1},{q:'Ø¹Ø¯Ø¯ Ø£Ù†Ø¨ÙŠØ§Ø¡ Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ',o:['20','25','30','35'],c:1}];
const BGS=[{em:'ğŸŒ±',nm:'Ø£ÙˆÙ„ Ø®Ø·ÙˆØ©',ds:'Ø¨Ø¯Ø£Øª Ø±Ø­Ù„ØªÙƒ',pts:0},{em:'ğŸ“–',nm:'Ù‚Ø§Ø±Ø¦ Ù…Ø¨ØªØ¯Ø¦',ds:'50 Ù†Ù‚Ø·Ø©',pts:50},{em:'ğŸ“¿',nm:'Ø§Ù„Ø°Ø§ÙƒØ±',ds:'100 Ù†Ù‚Ø·Ø©',pts:100},{em:'ğŸŒŸ',nm:'Ø·Ø§Ù„Ø¨ Ø§Ù„Ø¹Ù„Ù…',ds:'250 Ù†Ù‚Ø·Ø©',pts:250},{em:'ğŸ’',nm:'Ø§Ù„Ù…ØªØ£Ù…Ù„',ds:'500 Ù†Ù‚Ø·Ø©',pts:500},{em:'ğŸ†',nm:'Ø§Ù„Ø³Ø§Ø¨Ù‚ Ø¨Ø§Ù„Ø®ÙŠØ±Ø§Øª',ds:'1000 Ù†Ù‚Ø·Ø©',pts:1000},{em:'ğŸ‘‘',nm:'Ø¥Ù…Ø§Ù… Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†',ds:'2000 Ù†Ù‚Ø·Ø©',pts:2000},{em:'ğŸ•‹',nm:'Ø®Ø§Ø¯Ù… Ø§Ù„Ø­Ø±Ù…ÙŠÙ†',ds:'5000 Ù†Ù‚Ø·Ø©',pts:5000}];
const TBLBLS=['Ø³Ø¨Ø­Ø§Ù† Ø§Ù„Ù„Ù‡','Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡','Ø§Ù„Ù„Ù‡ Ø£ÙƒØ¨Ø±','Ù„Ø§ Ø¥Ù„Ù‡ Ø¥Ù„Ø§ Ø§Ù„Ù„Ù‡','Ø§Ù„Ù„Ù‡Ù… ØµÙ„ Ø¹Ù„Ù‰ Ù…Ø­Ù…Ø¯'];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// STATE â€” starts completely at 0 for new users
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let S={};

function freshState(name){
  return{name,pts:0,streak:0,lastLogin:'',
    khDone:0,khTotal:30,tbCount:0,tbIdx:0,
    remIdx:0,dkCounts:{},prayed:false,
    bookmark:null,dark:false};
}

function loadS(name){
  const raw=localStorage.getItem('nia2_'+name);
  S=raw?JSON.parse(raw):freshState(name);
  S.name=name;
  // streak
  const today=new Date().toDateString();
  const yest=new Date(Date.now()-86400000).toDateString();
  if(S.lastLogin!==today){
    if(S.lastLogin===yest)S.streak=(S.streak||0)+1;
    else if(S.lastLogin)S.streak=0;
    else S.streak=1;
    S.lastLogin=today; S.prayed=false;
  }
  saveS();
}
function saveS(){localStorage.setItem('nia2_'+S.name,JSON.stringify(S));}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AUTH
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function atab(t){
  document.querySelectorAll('.atab').forEach((el,i)=>el.classList.toggle('on',(t==='lg'&&i===0)||(t==='rg'&&i===1)));
  document.getElementById('fp-lg').classList.toggle('on',t==='lg');
  document.getElementById('fp-rg').classList.toggle('on',t==='rg');
}
function doLogin(){
  const n=document.getElementById('l-n').value.trim(),p=document.getElementById('l-p').value;
  const e=document.getElementById('l-e');
  if(!n||!p){e.textContent='ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„';return;}
  e.textContent='';startApp(n);
}
function doReg(){
  const n=document.getElementById('r-n').value.trim(),p=document.getElementById('r-p').value;
  const e=document.getElementById('r-e');
  if(!n){e.textContent='Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ';return;}
  if(p.length<6){e.textContent='ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± 6 Ø£Ø­Ø±Ù Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„';return;}
  e.textContent='';startApp(n);
}
function startApp(name){
  loadS(name);
  document.getElementById('auth').style.display='none';
  document.getElementById('app').style.display='block';
  if(S.dark)document.documentElement.setAttribute('data-dark','');
  document.getElementById('u-nm').textContent=S.name;
  updUI();
  initPr();
  buildDhikr();
  buildBadges();
  buildLB();
  buildQSel();
  ldSurah(1);
  startQuiz();
  startRamCd();
  toast(S.pts===0?'Ø£Ù‡Ù„Ø§Ù‹ '+S.name+'! Ø±Ø­Ù„ØªÙƒ ØªØ¨Ø¯Ø£ Ø§Ù„Ø¢Ù† Ù…Ù† 0 Ù†Ù‚Ø·Ø© ğŸŒŸ':'Ø£Ù‡Ù„Ø§Ù‹ '+S.name+'! Ø±ØµÙŠØ¯Ùƒ '+S.pts+' Ù†Ù‚Ø·Ø© â­');
}
function doOut(){saveS();location.reload();}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// POINTS ENGINE â€” every action gives real points
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function addPts(n,reason,x,y){
  S.pts+=n; saveS(); updUI();
  // pop nav pill
  const pil=document.getElementById('nav-pts');
  pil.textContent='â­ '+S.pts;
  pil.classList.add('pop');setTimeout(()=>pil.classList.remove('pop'),300);
  // float +N
  const fl=document.createElement('div');
  fl.className='ptsf';fl.textContent='+'+n+' â­';
  fl.style.left=(x||window.innerWidth/2-30)+'px';
  fl.style.top=(y||150)+'px';
  document.body.appendChild(fl);
  requestAnimationFrame(()=>{fl.style.transform='translateY(-55px)';fl.style.opacity='0';});
  setTimeout(()=>fl.remove(),800);
  if(reason)toast('ğŸŒŸ +'+n+' Ù†Ù‚Ø·Ø© â€” '+reason);
}
function lvl(){
  if(S.pts>=5000)return'ğŸ‘‘ Ø¥Ù…Ø§Ù… Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†';
  if(S.pts>=2000)return'ğŸ† Ø§Ù„Ø³Ø§Ø¨Ù‚ Ø¨Ø§Ù„Ø®ÙŠØ±Ø§Øª';
  if(S.pts>=1000)return'ğŸ’ Ø§Ù„Ù…ØªØ£Ù…Ù„';
  if(S.pts>=500)return'ğŸŒŸ Ø·Ø§Ù„Ø¨ Ø§Ù„Ø¹Ù„Ù…';
  if(S.pts>=250)return'ğŸ“¿ Ø§Ù„Ø°Ø§ÙƒØ±';
  if(S.pts>=100)return'ğŸ“– Ù‚Ø§Ø±Ø¦ Ù…Ø¨ØªØ¯Ø¦';
  return'ğŸŒ± Ù…Ø¨ØªØ¯Ø¦';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// UI
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updUI(){
  const kp=Math.round(S.khDone/S.khTotal*100);
  const tp=Math.min(100,Math.round(S.tbCount/100*100));
  const dk=Object.keys(S.dkCounts||{}).filter(k=>S.dkCounts[k]>=(AK[k]?.tg||33)).length;
  const dp=Math.round(dk/AK.length*100);
  // nav
  document.getElementById('nav-pts').textContent='â­ '+S.pts;
  // dash
  document.getElementById('d-pts').textContent=S.pts.toLocaleString('ar');
  document.getElementById('d-lv').textContent='Ø§Ù„Ù…Ø³ØªÙˆÙ‰: '+lvl();
  document.getElementById('d-kh').textContent=kp+'%';
  document.getElementById('d-kh-b').style.width=kp+'%';
  document.getElementById('d-tb').textContent=S.tbCount;
  document.getElementById('d-str').textContent=S.streak;
  document.getElementById('u-st').textContent=S.streak>1?'ğŸ”¥ '+S.streak+' Ø£ÙŠØ§Ù… Ù…ØªØªØ§Ù„ÙŠØ© â€” Ø§Ø³ØªÙ…Ø±!':'ğŸŒ¿ ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯ØŒ ÙØ±ØµØ© Ù„Ù„ØªÙ‚Ø±Ø¨ Ù…Ù† Ø§Ù„Ù„Ù‡';
  // goals
  document.getElementById('gkp').textContent=kp+'%';document.getElementById('gkb').style.width=kp+'%';
  document.getElementById('gtp').textContent=tp+'%';document.getElementById('gtb').style.width=tp+'%';
  document.getElementById('gdp').textContent=dp+'%';document.getElementById('gdb').style.width=dp+'%';
  // khatmah
  document.getElementById('khbar').style.width=kp+'%';
  document.getElementById('kh-lft').textContent=Math.max(0,S.khTotal-S.khDone);
  // rewards
  document.getElementById('rpts').textContent=S.pts.toLocaleString('ar');
  document.getElementById('rlv').textContent=lvl();
  // reminder
  const r=REMS[S.remIdx%REMS.length];
  document.getElementById('rem-q').textContent=r.t;
  document.getElementById('rem-r').textContent=r.r;
  // tasbeeh
  document.getElementById('tbnum').textContent=S.tbCount;
  document.getElementById('tblbl').textContent=TBLBLS[S.tbIdx||0];
  buildBadges(); buildLB();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// REMINDERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function nxtRem(){
  S.remIdx=(S.remIdx+1)%REMS.length;
  const el=document.getElementById('rem-q');
  el.style.opacity=0;
  setTimeout(()=>{updUI();el.style.transition='opacity .35s';el.style.opacity=1;},280);
  addPts(5,'ØªØ°ÙƒÙŠØ± Ø§Ù„ÙŠÙˆÙ…');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PRAYER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let prtimer;
function initPr(){
  document.getElementById('prloc').textContent='ğŸ“ Ø¬Ø§Ø±ÙŠ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...';
  if(navigator.geolocation){navigator.geolocation.getCurrentPosition(p=>fetchPr(p.coords.latitude,p.coords.longitude),()=>fetchPr(36.74,3.09,'Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±'));}
  else fetchPr(36.74,3.09,'Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±');
}
function fetchPr(lat,lng,city){
  const d=new Date();
  fetch(`https://api.aladhan.com/v1/timings/${d.getDate()}-${d.getMonth()+1}-${d.getFullYear()}?latitude=${lat}&longitude=${lng}&method=2`)
    .then(r=>r.json()).then(data=>{
      const t=data.data.timings;
      document.getElementById('pt-fj').textContent=fmtT(t.Fajr);
      document.getElementById('pt-sr').textContent=fmtT(t.Sunrise);
      document.getElementById('pt-dh').textContent=fmtT(t.Dhuhr);
      document.getElementById('pt-as').textContent=fmtT(t.Asr);
      document.getElementById('pt-mg').textContent=fmtT(t.Maghrib);
      document.getElementById('pt-is').textContent=fmtT(t.Isha);
      document.getElementById('prloc').textContent='ğŸ“ '+(city||lat.toFixed(1)+','+lng.toFixed(1));
      hilightPr(t); startPrCd(t);
    }).catch(()=>{document.getElementById('prloc').textContent='ğŸ“ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± (Ø§ÙØªØ±Ø§Ø¶ÙŠ)';});
}
function fmtT(s){const[h,m]=s.split(':').map(Number);return`${h%12||12}:${String(m).padStart(2,'0')} ${h>=12?'Ù…':'Øµ'}`;}
function toM(s){const[h,m]=s.split(':').map(Number);return h*60+m;}
function hilightPr(t){
  const now=new Date(),cur=now.getHours()*60+now.getMinutes();
  const ps=[{n:'Ø§Ù„ÙØ¬Ø±',v:toM(t.Fajr)},{n:'Ø§Ù„Ø¸Ù‡Ø±',v:toM(t.Dhuhr)},{n:'Ø§Ù„Ø¹ØµØ±',v:toM(t.Asr)},{n:'Ø§Ù„Ù…ØºØ±Ø¨',v:toM(t.Maghrib)},{n:'Ø§Ù„Ø¹Ø´Ø§Ø¡',v:toM(t.Isha)}];
  const nx=ps.find(p=>p.v>cur)||ps[0];
  document.getElementById('prnn').textContent=nx.n;
}
function startPrCd(t){
  clearInterval(prtimer);
  prtimer=setInterval(()=>{
    const now=new Date(),cur=now.getHours()*60+now.getMinutes();
    const ps=[toM(t.Fajr),toM(t.Dhuhr),toM(t.Asr),toM(t.Maghrib),toM(t.Isha)];
    let nx=ps.find(v=>v>cur);if(!nx)nx=ps[0]+1440;
    const diff=(nx-cur)*60-now.getSeconds();
    const el=document.getElementById('prcd');
    if(el)el.textContent=`${String(Math.floor(diff/3600)).padStart(2,'0')}:${String(Math.floor(diff%3600/60)).padStart(2,'0')}:${String(diff%60).padStart(2,'0')}`;
  },1000);
}
function prDone(){
  if(S.prayed){toast('âœ… Ø³Ø¬Ù‘Ù„Øª ØµÙ„Ø§ØªÙƒ Ø§Ù„ÙŠÙˆÙ… Ø¨Ø§Ù„ÙØ¹Ù„');return;}
  S.prayed=true;saveS();
  addPts(30,'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„ØµÙ„Ø§Ø©');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QURAN
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let aCache=[];
function buildQSel(){const s=document.getElementById('ssel');SN.forEach((n,i)=>{const o=document.createElement('option');o.value=i+1;o.textContent=`${i+1}. ${n}`;s.appendChild(o);});}
function ldSurah(num){
  if(!num)return;
  document.getElementById('snm').textContent=SN[num-1];
  document.getElementById('alist').innerHTML='<div class="loading"><div class="spin"></div> Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...</div>';
  fetch(`https://api.alquran.cloud/v1/surah/${num}/editions/quran-simple,en.pickthall`)
    .then(r=>r.json()).then(d=>{
      const ar=d.data[0].ayahs,en=d.data[1].ayahs;
      document.getElementById('sinf').textContent=(d.data[0].revelationType==='Meccan'?'Ù…ÙƒÙŠØ©':'Ù…Ø¯Ù†ÙŠØ©')+' Â· '+ar.length+' Ø¢ÙŠØ©';
      aCache=ar.map((a,i)=>({...a,tr:en[i].text}));
      renderA(aCache);
    }).catch(()=>{document.getElementById('alist').innerHTML='<p style="text-align:center;padding:30px;color:var(--tx-l)">âš ï¸ ØªØ¹Ø°Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„</p>';});
}
function renderA(list){
  const bk=S.bookmark;
  document.getElementById('alist').innerHTML=list.map(a=>`
    <div class="ai${bk&&bk.n===a.numberInSurah?' bk':''}" onclick="tapA(${a.numberInSurah},event)">
      <div class="anum">${a.numberInSurah}</div>
      <div class="atxt">${a.text}</div>
      <div class="atr">${a.tr}</div>
    </div>`).join('');
}
function filterA(q){if(!q){renderA(aCache);return;}renderA(aCache.filter(a=>a.text.includes(q)||a.tr.toLowerCase().includes(q.toLowerCase())));}
function tapA(n,e){S.bookmark={n};saveS();addPts(5,'Ø­ÙØ¸ Ø¢ÙŠØ©',e.clientX,e.clientY);renderA(aCache);}
function markDay(){
  if(S.khDone>=S.khTotal){toast('ğŸ‰ Ø£ÙƒÙ…Ù„Øª Ø§Ù„Ø®ØªÙ…Ø© Ù…Ø¨Ø§Ø±Ùƒ!');return;}
  S.khDone=Math.min(S.khTotal,S.khDone+1);saveS();updUI();
  addPts(50,'Ø¥ÙƒÙ…Ø§Ù„ ÙˆØ±Ø¯ Ø§Ù„Ù‚Ø±Ø¢Ù†');
  if(S.khDone>=S.khTotal){setTimeout(()=>addPts(200,'Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø®ØªÙ…Ø© ÙƒØ§Ù…Ù„Ø© ğŸ‰'),1000);}
}
function bkCur(){addPts(5,'Ø­ÙØ¸ Ø§Ù„Ù…ÙˆØ¶Ø¹');}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DHIKR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildDhikr(){
  document.getElementById('dkgrid').innerHTML=AK.map((d,i)=>{
    const c=S.dkCounts[i]||0,p=Math.min(100,Math.round(c/d.tg*100));
    return`<div class="dkcard">
      <div class="dkar">${d.ar}</div>
      <div class="dkme">${d.me} (${d.tg}Ã—)</div>
      <div class="pb" style="margin-bottom:9px"><div class="pbf" id="dp${i}" style="width:${p}%"></div></div>
      <div class="dkrow">
        <button class="dkbtn${c>=d.tg?' done':''}" id="db${i}" onclick="cntDk(${i},event)">${c} / ${d.tg}</button>
        <span style="font-size:10px;color:var(--tx-l)">${p}%</span>
      </div></div>`;
  }).join('');
  document.getElementById('duagrid').innerHTML=DUS.map(d=>`
    <div class="dkcard">
      <div style="font-size:11px;font-weight:700;color:var(--gd-d);margin-bottom:7px">${d.ti}</div>
      <div class="dkar" style="font-size:16px">${d.ar}</div>
      <div class="dkme">${d.me}</div>
    </div>`).join('');
}
function cntDk(i,e){
  if(!S.dkCounts)S.dkCounts={};
  const tg=AK[i].tg;
  S.dkCounts[i]=(S.dkCounts[i]||0)+1;
  if(S.dkCounts[i]>tg)S.dkCounts[i]=0;
  saveS();
  const c=S.dkCounts[i],p=Math.min(100,Math.round(c/tg*100));
  const btn=document.getElementById('db'+i),pb=document.getElementById('dp'+i);
  if(btn){btn.textContent=c+' / '+tg;btn.classList.toggle('done',c>=tg);}
  if(pb)pb.style.width=p+'%';
  if(c===tg)addPts(20,'Ø¥ÙƒÙ…Ø§Ù„ Ø°ÙƒØ± "'+AK[i].me+'"',e.clientX,e.clientY);
  updUI();
}
function incTb(){
  S.tbCount++;saveS();
  const el=document.getElementById('tbnum');
  el.textContent=S.tbCount;el.classList.add('pop');setTimeout(()=>el.classList.remove('pop'),140);
  document.getElementById('d-tb').textContent=S.tbCount;
  const tp=Math.min(100,Math.round(S.tbCount/100*100));
  document.getElementById('gtp').textContent=tp+'%';document.getElementById('gtb').style.width=tp+'%';
  if(S.tbCount%33===0)addPts(5,'ØªØ³Ø¨ÙŠØ­ 33Ã—');
  if(S.tbCount===100)addPts(15,'Ø¥ÙƒÙ…Ø§Ù„ 100 ØªØ³Ø¨ÙŠØ­Ø© ğŸ‰');
}
function rstTb(){S.tbCount=0;saveS();document.getElementById('tbnum').textContent=0;document.getElementById('d-tb').textContent=0;}
function nxtTb(){S.tbIdx=((S.tbIdx||0)+1)%TBLBLS.length;saveS();document.getElementById('tblbl').textContent=TBLBLS[S.tbIdx];}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// REWARDS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function buildBadges(){
  document.getElementById('bgrid').innerHTML=BGS.map(b=>`
    <div class="bit${S.pts>=b.pts?'':' lkd'}">
      <span class="bem">${b.em}</span>
      <div class="bnm">${b.nm}</div>
      <div class="bds">${b.pts===0?'Ù…ÙØªÙˆØ­Ø© Ø¯Ø§Ø¦Ù…Ø§Ù‹':b.ds+(S.pts>=b.pts?' âœ…':'')}</div>
    </div>`).join('');
}
function buildLB(){
  const rows=[
    {nm:'Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯',pts:3200},{nm:'ÙØ§Ø·Ù…Ø© Ø§Ù„Ø²Ù‡Ø±Ø§Ø¡',pts:2100},{nm:'Ø¹Ù…Ø± Ø®Ø§Ù„Ø¯',pts:1650},
    {nm:'Ù…Ø±ÙŠÙ… Ø­Ø³Ù†',pts:980},{nm:'ÙŠÙˆØ³Ù Ø¹Ù„ÙŠ',pts:540}
  ];
  rows.push({nm:S.name+' (Ø£Ù†Øª)',pts:S.pts,me:true});
  rows.sort((a,b)=>b.pts-a.pts);
  const md=['ğŸ¥‡','ğŸ¥ˆ','ğŸ¥‰'];
  document.getElementById('lb').innerHTML=rows.map((r,i)=>`
    <div class="lbrow${r.me?' me':''}">
      <span style="font-size:17px;width:24px">${md[i]||i+1}</span>
      <span style="flex:1">${r.nm}</span>
      <span style="font-weight:700;color:var(--gd-d);font-family:'Amiri',serif">${r.pts.toLocaleString('ar')}</span>
    </div>`).join('');
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// QUIZ
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let qi=0,qs=0,ql=[];
function startQuiz(){ql=[...QQ].sort(()=>Math.random()-.5);qi=0;qs=0;document.getElementById('qzt').textContent=ql.length;renderQ();}
function renderQ(){
  const q=ql[qi];
  document.getElementById('qzn').textContent=qi+1;
  document.getElementById('qzbar').style.width=((qi+1)/ql.length*100)+'%';
  document.getElementById('qzq').textContent=q.q;
  document.getElementById('qzsc').textContent=qs;
  document.getElementById('qznxt').style.display='none';
  document.getElementById('qzopts').innerHTML=q.o.map((o,i)=>`<button class="qzopt" onclick="ansQ(${i},${q.c})">${o}</button>`).join('');
}
function ansQ(ch,co){
  document.querySelectorAll('.qzopt').forEach(b=>b.onclick=null);
  document.querySelectorAll('.qzopt')[co].classList.add('ok');
  if(ch!==co)document.querySelectorAll('.qzopt')[ch].classList.add('no');
  else{qs+=10;addPts(10,'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© ÙÙŠ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±');}
  document.getElementById('qzsc').textContent=qs;
  if(qi<ql.length-1)document.getElementById('qznxt').style.display='block';
  else setTimeout(()=>{toast('ğŸ‰ Ø§Ù†ØªÙ‡Ù‰ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±! Ù†ØªÙŠØ¬ØªÙƒ: '+qs+' Ù…Ù† '+(ql.length*10));startQuiz();},2000);
}
function qNext(){qi++;renderQ();}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// OCCASIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function startRamCd(){
  setInterval(()=>{
    const now=new Date();
    let tg=new Date(now.getFullYear(),2,1);
    if(now>tg)tg.setFullYear(tg.getFullYear()+1);
    const df=tg-now;
    document.getElementById('ocd-d').textContent=Math.floor(df/86400000);
    document.getElementById('ocd-h').textContent=Math.floor(df%86400000/3600000);
    document.getElementById('ocd-m').textContent=Math.floor(df%3600000/60000);
    document.getElementById('ocd-s').textContent=String(Math.floor(df%60000/1000)).padStart(2,'0');
  },1000);
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// NAV & MISC
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function gto(id,btn){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('on'));
  document.querySelectorAll('.nb').forEach(b=>b.classList.remove('on'));
  document.getElementById('pg-'+id).classList.add('on');
  if(btn)btn.classList.add('on');
}
function tglDark(){S.dark=!S.dark;saveS();document.documentElement.toggleAttribute('data-dark',S.dark);toast(S.dark?'ğŸŒ™ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù„ÙŠÙ„ÙŠ':'â˜€ï¸ Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„Ù†Ù‡Ø§Ø±ÙŠ');}
let tT;
function toast(m){const el=document.getElementById('toast');el.textContent=m;el.classList.add('show');clearTimeout(tT);tT=setTimeout(()=>el.classList.remove('show'),3000);}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AUTO RESUME
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
window.addEventListener('DOMContentLoaded',()=>{
  for(let i=0;i<localStorage.length;i++){
    const k=localStorage.key(i);
    if(k.startsWith('nia2_')){startApp(k.slice(5));break;}
  }
});
</script>
</body>
</html>
